# These settings override the default settings

# The geonode location.
SITEURL = '<%= node['rogue']['rogue_geonode']['settings']['SITEURL'] %>'
DEBUG = <%= node['rogue']['debug'] ? "True":"False" %>

ALLOWED_HOSTS = (
<%node['rogue']['settings']['ALLOWED_HOSTS'].each do |host|%>
'<%= host %>',
<%end%>

)

PROXY_ALLOWED_HOSTS = (
<%node['rogue']['settings']['PROXY_ALLOWED_HOSTS'].each do |host|%>
'<%= host %>',
<%end%>
)

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': '<%= @database[:name] %>',
        'USER': '<%= @database[:user] %>',
        'PASSWORD': '<%= @database[:password] %>',
        'HOST': '<%= @database[:host] %>',
        'PORT': '<%= @database[:port] %>',
    },

    <% if @data_store[:name] -%>
    '<%= @data_store[:name] %>': {
        'ENGINE': 'django.contrib.gis.db.backends.postgis',
        'NAME': '<%= @data_store[:name] %>',
        'USER': '<%= @data_store[:user] %>',
        'PASSWORD': '<%= @data_store[:password] %>',
        'HOST': '<%= @data_store[:host] %>',
        'PORT': '<%= @data_store[:port] %>',
    },
    <% end -%>
}

# OGC (WMS/WFS/WCS) Server Settings
OGC_SERVER = {
    'default': {
        'BACKEND': 'geonode.geoserver',
        'LOCATION': '<%=node['rogue']['rogue_geonode']['settings']['OGC_SERVER']['LOCATION'] %>',
        'USER': '<%=node['rogue']['rogue_geonode']['settings']['OGC_SERVER']['USER']%>',
        'PASSWORD': '<%=node['rogue']['rogue_geonode']['settings']['OGC_SERVER']['PASSWORD']%>',
        'MAPFISH_PRINT_ENABLED': True,
        'PRINTNG_ENABLED': True,
        'GEONODE_SECURITY_ENABLED': True,
        'GEOGIT_ENABLED': True,
        'WMST_ENABLED': False,
        # This replaces DB_DATASTORE=True
        # If DATASTORE != '' then geonode will use the datastore backend
        'DATASTORE': '<%= @data_store[:name] %>',
        'GEOGIT_DATASTORE_DIR':'<%=node['rogue']['rogue_geonode']['settings']['OGC_SERVER']['GEOGIT_DATASTORE_DIR'] %>',
        }
    }

#Database datastore connection settings
GEOGIT_DATASTORE_NAME = 'geogit-repo'

# Use the printNG geoserver lib
PRINTNG_ENABLED = True

UPLOADER = {
    'BACKEND' : '<%=node['rogue']['rogue_geonode']['settings']['UPLOADER']['BACKEND'] or 'geonode.rest'%>',
    'OPTIONS' : {
        'TIME_ENABLED' : True,
        'GEOGIT_ENABLED' : True,
    }
}